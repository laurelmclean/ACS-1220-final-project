{% extends 'base.html' %}
{% block content %}

<h1>{{ concert.name }}</h1>

<p><img src="{{ concert.image }}" width="400px"></p>

<h2>Price:</h2> 
<p>${{ concert.price }}</p>

<h2>Date:</h2> 
{{ concert.date }}

<h2>Venue:</h2> 
{{ concert.venue }}

<h2>Address:</h2> 
{{ concert.address }}

<h2>Artist Playing:</h2> 

<a href="/artist/{{ concert.artist_playing.id }}">{{ concert.artist_playing }}</a>

{% if current_user.is_authenticated %}
    {% if concert not in current_user.attending %}
        <form action="/attending/{{ concert.id }}" method="POST">
            <input type="submit" value="Attend this Concert">
        </form>
    {% else %}
        <form action="/unattend/{{ concert.id }}" method="POST">
            <input type="submit" value="Can't Attend">
        </form>
    {% endif %}
{% endif %}

<h2>Attending:</h2>
{% if concert.guests_attending %}
<ul>
    {% for guest in concert.guests_attending %}
    <li><a href="/profile/{{ guest.id }}">{{ guest.username }}</a></li>
    {% endfor %}
</ul>
{% else %}
<h4>{{ concert.name }} does not have anyone attending!</h4>
{% endif%}

<h2>Edit Concert</h2>

<form method="POST" action="{{ url_for('main.concert_detail', concert_id=concert.id) }}">
    {{ form.csrf_token }}
    <fieldset>
        <legend>Please update information:</legend>

        {{ form.name.label }}
        {{ form.name }}
        
        {{ form.price.label }}
        {{ form.price }}
        
        {{ form.venue.label }}
        {{ form.venue }}
        
        {{ form.address.label }}
        {{ form.address }}
        
        {{ form.date.label }}
        {{ form.date }}
        
        {{ form.artist_playing.label }}
        {{ form.artist_playing }}

        {{ form.image.label }}
        {{ form.image }}
        
        {{ form.submit }}
    </fieldset>
</form>

{% endblock %}